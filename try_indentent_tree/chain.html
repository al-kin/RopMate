<html>
    <head>
      <style>
      .title{
            position: fixed;
       }
       </style>
    </head>

    <body style="overflow-y:hidden; overflow-x:scroll;">
      <script src="https://d3js.org/d3.v4.min.js"></script>
      <script src="//d3js.org/d3-scale-chromatic.v0.3.min.js"></script>
      <form action="" method ="post" name ="register">
        <div class="title">
          <b>Result</b><br>
          <button type="button" onclick="return remove_all();"> Remove all </button>
          <button type="button" onclick="return remove();"> Remove</button>
        </div>
      </form>

      <script>
      //make the svg container
      var count = 0;
      var svgContainer = d3.select("body").append("svg")
        .attr("width", 20000)
        .attr("height", 20000);
       //make the rectangle
      function add(x){
        count = count + 1;
        var rectangle = svgContainer.append("rect")
        .attr("x", -50 + (count*120))
        .attr("y", 60)
        .attr("width", 100)
        .attr("height", 50)
        .attr("fill", "#b3d9ff")
        .attr("class", "rect" + count)
        .style("stroke","black");
        console.log(x)

        svgContainer.append("text")
            .attr("x", -50 + (count*120))
            .attr("y", 73)
            .attr("dy", 0)
            .attr("class", "rect" + count)
            .text("x.data.type ciao ciao ciao ciao ciao ciao cuai ")
            .call(wrap, 100);
      }

      function wrap(text, width) {
        text.each(function() {
          var text = d3.select(this),
              words = text.text().split(/\s+/).reverse(),
              word,
              line = [],
              lineNumber = 0,
              lineHeight = 1.1, // ems
              y = text.attr("y"),
              dy = parseFloat(text.attr("dy")),
              tspan = text.text(null).append("tspan").attr("x", -43+(count*120)).attr("y", y).attr("dy", dy + "em")
          while (word = words.pop()) {
            line.push(word)
            tspan.text(line.join(" "))
            if (tspan.node().getComputedTextLength() > width) {
              line.pop()
              tspan.text(line.join(" "))
              line = [word]
              tspan = text.append("tspan").attr("x", -43+(count*120)).attr("y", y).attr("dy", `${++lineNumber * lineHeight + dy}em`).text(word)
            }
          }
        })
      }

      function remove_all(){
        svgContainer.selectAll("rect").remove()
        count = 0;
      }

      function remove(){
        svgContainer.selectAll(".rect" + count).remove()
        count = count - 1;
      }

    </script>

    </body>
</html>
