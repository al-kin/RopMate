<html>
    <head>

        <link rel="stylesheet" type="text/css" href="/css/style.css">
        <script src="../build/d3.min.js"></script>
        
    </head>

    <body style="overflow-y:hidden; overflow-x:hidden;">
        <form action="" method ="post" name ="register">
            <div align = center>
                Avoid Memory
                <input type ="checkbox" name ="Memory" size ='3' value = 'yes' onchange="set_avoid_mem(this)"><br><br>

                Preserved Registers<br><br>
                EAX <input type ="checkbox" name ="eax" id ="eax" size ='3' value = 'yes' onchange="add_preserved_reg(this)"><br>
                EBX <input type ="checkbox" name ="ebx" id ="ebx" size ='3' value = 'yes' onchange="add_preserved_reg(this)"><br>
                ECX <input type ="checkbox" name ="ecx" id ="ecx" size ='3' value = 'yes' onchange="add_preserved_reg(this)"><br>
                EDX <input type ="checkbox" name ="edx" id ="edx" size ='3' value = 'yes' onchange="add_preserved_reg(this)"><br>
                EBP <input type ="checkbox" name ="ebp" id ="ebp" size ='3' value = 'yes' onchange="add_preserved_reg(this)"><br>
                ESI <input type ="checkbox" name ="esi" id ="esi" size ='3' value = 'yes' onchange="add_preserved_reg(this)"><br>
                EDI <input type ="checkbox" name ="edi" id ="edi" size ='3' value = 'yes' onchange="add_preserved_reg(this)"><br>


                <br>
                <input type ="reset" value ="Reset" onclick="clear_preserved_regs()"><br>

            </div>
            <div id="gadget_chosen"></div>
        </form>

        <script>
            function add_preserved_reg(checkbox) {
                if(checkbox.checked)
                {
                    if(!parent.tree.filter.preserved_regs.includes(checkbox.name))
                        parent.tree.filter.preserved_regs.push(checkbox.name)
                }
                else {
                    if(parent.tree.filter.preserved_regs.includes(checkbox.name))
                    var i = parent.tree.filter.preserved_regs.indexOf(checkbox.name);
                    parent.tree.filter.preserved_regs.splice(i, 1);
                }
                parent.tree.reload()
            }

            function set_avoid_mem(checkbox)
            {
                parent.tree.filter.avoid_mem = checkbox.checked
                parent.tree.reload()
            }

            function clear_preserved_regs() {
                // yes, this works
                parent.tree.filter.preserved_regs.length = 0; 
                parent.tree.filter.avoid_mem = false
                parent.tree.reload()
            }
        </script>
    </body>
</html>
