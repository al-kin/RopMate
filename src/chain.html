<html>
    <head>

        <link rel="stylesheet" type="text/css" href="/css/style.css">
    </head>

    <body style="overflow-y:hidden; overflow-x:scroll;">
      <script src="../build/d3.min.js"></script>
      <form action="" method ="post" name ="register">
        <div class="title">
          Result<br>
          <button type="button" onclick="return remove_all();"> Remove all </button>
          <button type="button" onclick="return remove();"> Remove</button>
        </div>
      </form>

      <script>
      //aggiungi testo come hyperlink
      var count = 0;
      var svgContainer = d3.select("body").append("svg")
        .attr("width", 20000)
        .attr("height", 20000);

      function add_block_to_chain(selectedGadget){
        if(selectedGadget.data.type != ""){
          count = count + 1;
          var rectangle = svgContainer.append("rect")
          .attr("x", -130 + (count*180))
          .attr("y", 60)
          .attr("rx", 4)
          .attr("ry", 4)
          .attr("width", 150)
          .attr("height", 50)
          .attr("class", "rect" + count)
          .on("click", function(d){
            d3.select(this).transition()
                      .duration(50)
                      .style("fill-opacity", "0.6")
                      .transition()
                      .delay(51)
                      .duration(50)
                      .style("fill-opacity", "1");
            parent.choices.selectedGadget = selectedGadget;
            parent.choices.add_gadget_info_window();
            });
          svgContainer.append("text")
              .attr("x", -55 + (count*180))
              .attr("y", 85)
              .attr("dy", 0)
              .attr("class", "rect" + count)
              .attr("text-anchor", "middle")
              .attr("dominant-baseline", "central")
              .text(trim(selectedGadget.data.params));

          svgContainer.append("svg:path")
            .attr("d", "M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z")
            .attr("class", "rect" + count)
            .style("stroke-width", 1)
            .style("stroke", "black")
            .attr("fill", "#66c2a4")
            .attr("transform", "translate(" + (-157 + count * 180) + "," + 72.5 + ")");
        }
      }

      function trim(text) {
        return text;
      }

      function remove_all(){
        svgContainer.selectAll("rect").remove();
        svgContainer.selectAll("text").remove();
        svgContainer.selectAll("path").remove();
        count = 0;
      }

      function remove(){
        if(count > 0){
          svgContainer.selectAll(".rect" + count).remove()
          count = count - 1;
        }
      }

    </script>

    </body>
</html>
